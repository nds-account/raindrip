<?php /** * @package Spider Catalog * @author Web-Dorado * @copyright (C) 2012 Web-Dorado. All rights reserved. * @license GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html **/ defined( '_JEXEC' ) or die( 'Restricted access' );function spidercatalogBuildRoute(&$query){	$segments = array();	if (isset($query['view']))	{		$segments[] = $query['view'];		unset($query['view']);		if (isset($query['Itemid']))		{			$segments[] = $query['Itemid'];			unset($query['Itemid']);		}		if (isset($query['product_id']))		{			$segments[] = $query['product_id'];			unset($query['product_id']);		}		if (isset($query['select_categories']))		{			$segments[] = $query['select_categories'];			unset($query['select_categories']);		}		if (isset($query['prname']))		{			$segments[] = $query['prname'];			unset($query['prname']);		}	}	return $segments;}function spidercatalogParseRoute($segments){	$query = array();	if (isset($segments[0]))	{		$query['view'] = $segments[0];		if (isset($segments[1]))		{			$query['Itemid'] = $segments[1];		}		if (isset($segments[2]))		{			$query['product_id'] = $segments[2];		}		if (isset($segments[3]))		{			$query['select_categories'] = $segments[3];			}		if (isset($segments[4]))		{			$query['prname'] = $segments[4];			}	}		return $query;}function getItemid( $component, $view ){    $items = JFactory::getApplication()->getMenu( 'site' )->getItems( 'component', $component );    foreach ( $items as $item ) {        if($item->query['view'] === $view){            return $item->id;        }    }} $itemid = getItemid( 'com_spidercatalog', 'spidercatalog' );?>